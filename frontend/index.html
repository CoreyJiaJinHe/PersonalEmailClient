<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Personal Email Client</title>
  <style>
    :root {
      --bg: #ffffff;
      --fg: #111111;
      --subtle: #666666;
      --border: #dddddd;
      --divider: #eeeeee;
      --hover: #f5f5f5;
      --panel: #fafafa;
      --accent: #0a7a0a;
      --mark-bg: #ffeb3b;
      --mark-fg: #000;
    }
    [data-theme="dark"] {
      --bg: #1e1f22;
      --fg: #e6e6e6;
      --subtle: #aaaaaa;
      --border: #3a3d41;
      --divider: #2a2d2f;
      --hover: #2a2d2f;
      --panel: #242628;
      --accent: #4caf50;
      --mark-bg: #9ccc65;
      --mark-fg: #000;
    }
    body { font-family: Arial, sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg); color: var(--fg); }
    #sidebar { width: 320px; min-width: 220px; max-width: 60vw; overflow: hidden; border-right: 1px solid var(--border); padding: 0; box-sizing: border-box; display: flex; flex-direction: column; }
    #splitter { width: 6px; cursor: col-resize; background: transparent; }
    #splitter:hover { background: var(--divider); }
    #actions { flex: 0 0 auto; padding: 10px; border-bottom: 1px solid var(--border); background: var(--bg); position: sticky; top: 0; z-index: 10; }
    #messageList { flex: 1 1 auto; overflow-y: auto; padding: 4px 10px 10px; }
    #content { flex: 1; padding: 0 10px 10px; overflow-y: auto; min-width: 0; }
    .msg { padding: 8px 6px; border-bottom: 1px solid var(--divider); cursor: pointer; }
    .msg:hover { background: var(--hover); }
    .msg .row { display: flex; align-items: flex-start; gap: 8px; }
    .msg .left { flex: 1; min-width: 0; }
    .msg .right { flex: 0 0 auto; color: var(--subtle); font-size: 12px; padding-left: 6px; white-space: nowrap; }
    .msg .subject { font-weight: 600; }
    .msg .from { color: var(--subtle); font-size: 12px; }
    .msg .snippet { color: var(--subtle); font-size: 12px; margin-top: 2px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; }
    .hidden { color: #999; }
    mark { background: var(--mark-bg); color: var(--mark-fg); padding: 0 2px; }
    input, button, label { margin: 2px; color: var(--fg); }
    input, button { background: var(--panel); border: 1px solid var(--border); }
    #trashToggle { margin-left: 8px; }
    #detailToolbar { position: sticky; top: 0; background: var(--bg); padding: 6px 8px; border-bottom: 1px solid var(--border); display: flex; gap: 8px; justify-content: flex-end; z-index: 10; margin:0; }
    #detailSubject { font-weight: bold; font-size: 16px; margin: 8px 0 4px; }
    #detailMeta { font-size: 12px; color: var(--subtle); margin-bottom: 8px; }
    #detailBody { border: 1px solid var(--border); padding: 8px; background: var(--panel); }
    .no-results { padding: 10px; color: var(--subtle); font-style: italic; }
    .status { font-size: 12px; color: var(--accent); }
    /* Settings menu */
    #settingsBar { display:flex; align-items:center; justify-content: space-between; }
    #settingsBtn { float: right; }
    #settingsMenu { position: absolute; right: 10px; top: 44px; background: var(--bg); border: 1px solid var(--border); box-shadow: 0 4px 16px rgba(0,0,0,0.2); padding: 8px 10px; display: none; z-index: 100; }
    #settingsMenu label { display:block; margin: 6px 0; }
    #accountsPanel { padding:6px 10px; border-bottom:1px solid var(--border); background:var(--panel); }
    #accountsPanel h3 { margin:4px 0 6px; font-size:13px; font-weight:600; }
    #accountsList { list-style:none; padding:0; margin:0; max-height:160px; overflow-y:auto; }
    #accountsList li { display:flex; align-items:center; justify-content:space-between; padding:4px 4px; border-bottom:1px solid var(--divider); font-size:12px; }
    #accountsList li button { font-size:11px; margin-left:4px; }
    #addGmailBtn { margin-top:4px; width:100%; }
  </style>
</head>
<body>
  <div id="sidebar">
    <div id="actions">
      <div id="settingsBar">
        <!-- Manual IMAP login temporarily disabled (Gmail OAuth only) -->
        <div style="display:none;">
          <input id="imapHost" placeholder="IMAP host" />
          <input id="imapUser" placeholder="Username" />
          <input id="imapPass" placeholder="Password" type="password" />
          <button id="syncBtn">Sync</button>
        </div>
        <button id="settingsBtn" title="Settings">⚙️</button>
      </div>
      <div id="settingsMenu">
        <label><input type="checkbox" id="settingsDark"/> Dark theme</label>
      </div>
      <div id="accountsPanel">
        <h3>Accounts</h3>
        <ul id="accountsList"></ul>
        <button id="addGmailBtn">Add Gmail Account</button>
      </div>
      <input id="searchBox" placeholder="Search subject, sender, or body" />
      <button id="searchBtn">Search</button>
      <button id="clearSearchBtn">Clear</button>
      <div style="margin-top:6px;">
        <button id="prevPageBtn">Prev</button>
        <span id="pageIndicator">Page 1</span>
        <button id="nextPageBtn">Next</button>
      </div>
      <label><input type="checkbox" id="trashToggle"/> Show Trash</label>
      <div class="status" id="status"></div>
    </div>
    <div id="messageList"></div>
  </div>
  <div id="splitter"></div>
  <div id="content">
    <div id="detail">
      <div id="detailToolbar" style="display:none;">
        <button id="deleteBtn">Delete</button>
        <button id="restoreBtn">Restore</button>
      </div>
      <div id="detailSubject"></div>
      <div id="detailMeta"></div>
      <div id="detailBody"></div>
    </div>
  </div>
  <script src="renderer.js"></script>
</body>
</html>
